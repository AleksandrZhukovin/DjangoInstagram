{% extends 'base.html' %}
{% block title %}<title>{{ title }}</title>{% endblock %}
{% block import %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles/home.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'styles/add_post.css' %}" type="text/css">
    <script src="{% static 'js/home.js' %}"></script>
    <script src="{% static 'js/add_post.js' %}" type="text/javascript"></script>
{% endblock %}

{% block content %}
<body class="body_back">
    <div class="container-fluid">
        <div class="row" id="main">
        <div class="side_bar sticky-top col-md-3 col-lg-2">
            <div class="content">
                <a href="/"><img class="my-5 mx-3 logo" src="{% static 'design/logo.png' %}"></a>
                <a href="/"><img class="my-5 logo_sm" src="{% static 'design/logo1.png' %}"></a>
                <a class='nav' href="/profile">
                    <img class="profile-image nav_icon" src="{{ user.image.url }}">  <text class="nav_link">Profile</text>
                </a><br>
                <a class='nav' href="#" id="open"><img class="nav_icon" src="{% static 'design/add.png' %}">  <text class="nav_link">Add Post</text></a><br>
                <a class='nav' href="/logout"><img class="nav_icon" src="{% static 'design/logout.png' %}">  <text class="nav_link">Logout</text></a><br>
                <a class='nav' href="/search"><img class="nav_icon" src="{% static 'design/search.png' %}">  <text class="nav_link">Search</text></a><br>
                <a class='nav' href="/chats"><img class="nav_icon" src="{% static 'design/message.png' %}">  <text class="nav_link">Chats</text></a><br>
            </div>
        </div>

        <div class="col-md-7 col-lg-8 my-4">
            {% csrf_token %}
            {% if posts %}
                {% for p in posts %}
                    <div class="post" id="{{ p.0.id }}">
                        <a class="profile_link" href="/user_profile/{{ p.0.user.id }}"><img class="profile-image pr-3" src="{{ p.0.profile.image.url }}" width="35" height="35"> <b>{{ p.0.user.username }}</b></a><br>
                        <a href="/post/{{ p.0.id }}"><img class="post_image my-2" src="{{ p.0.image.url }}"></a><br>
                        <div class="likes" data-id="{{ p.0.id }}">
                            <input type="hidden" class="is_liked" data-for="{{ p.1 }}">
                            <a data-id="{{ p.0.id }}" data-url="/">
                                <img class="like_btn" data-id="{{ p.0.id }}" data-url="/" src="{% static 'design/like.png' %}" width="23">
                            </a>
                            <a class="mx-2 my-2" href="/post/{{ p.0.id }}">
                                <img src="{% static 'design/comment.png' %}" width="23">
                            </a>
                            <p class="my-2 text"><b class="like_amount">{{ p.2 }}</b> likes</p>
                        </div>
                        <p class="text"><a class="profile_link" href="/user_profile/{{ p.0.user.id }}"><b>{{ p.0.user.username }}</b></a> {{ p.0.description }}</p>
                        <a class="info" href="/post/{{ p.0.id }}">Add Comment</a>
                        <hr>
                    </div>
                {% endfor %}
            {% else %}
                <h1>Not yet</h1>
            {% endif %}
        </div>
        <div class="col-md-2 col-lg-2 my-4">
            <a href="/profile"><img class="profile-image pr-3" src="{{ user.image.url }}" width="50" height="50"></a>
            <a class="profile_link mx-2" href="/profile"><b>{{ user.username }}</b></a><br>
            <h6 class="my-3 text-white-50">Recommendations</h6>
            <hr>
        </div>
        </div>
    </div>
    <a><img id='quit' class="quit_btn quit_wait" src="{% static 'design/quit.png' %}"></a>
    <dialog id="choose">
        <div class="container-fluid">
            <div class="row text-center">
                <p class="text-white"><b>Create new post</b></p>
            </div>
            <hr>
            <div class="row justify-content-center">
                <div class="pic">
                    <img class="my-5" src="/static/design/add_post.png" width="17%"><br>
                    {% csrf_token %}
                    <input type="file" id="id_image" required name="file" class="file_inpt">
                    <button type="button" class="btn btn-primary" id="file_upload"><b>Select</b></button>
                </div>
            </div>
        </div>
    </dialog>
    <dialog id="describe">
        <div class="container-fluid">
            <div class="row text-center">
                <p class="text-white"><b>Create new post</b></p>
            </div>
        <hr>
            <div class="row">
                <div class="col-6 my-5">
                    <img id="image" src="" width="100%"><br>
                </div>
                <div class="col-6">
                     <p class="text-white my-2"><img class="profile-image pr-3" src="{{ user.image.url }}" width="30"> <b class="mx-2">{{ user.username }}</b></p>
                    <textarea rows="5" cols="30" id="description_area" class="df" placeholder="Write a caption..."></textarea>
                    <button class="btn btn-primary" type="button" id="share"><b>Share</b></button>
                </div>
            </div>
        </div>
    </dialog>
</body>
{% endblock %}